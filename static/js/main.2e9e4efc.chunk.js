(this["webpackJsonpkcal-counter"]=this["webpackJsonpkcal-counter"]||[]).push([[0],{201:function(e,t,n){},352:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(18),o=n.n(c),i=(n(201),n(16)),s=n(10),l=n(17),d=n(393),u=n(394),j=n(73),b=n(396),m=n(412),h=n(31),O="https://sipv.gorecan.com:11111/api/v1",f=n(33),x=n.n(f),g=n(174),p=n(28);function v(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),o=Object(s.a)(c,2);return{loading:n,error:o[0],setLoading:r,setError:o[1]}}var y=n(2),k=r.a.createContext({publicFood:[],personalFood:[],loadPublicFood:function(){},loadPersonalFood:function(){},createPersonalFood:function(){},removePersonalFood:function(){},editPersonalFood:function(){},getFoodById:function(){return null},loading:!1});function S(){return Object(a.useContext)(k)}var C=function(e){var t=e.children,n=Object(a.useState)([]),r=Object(s.a)(n,2),c=r[0],o=r[1],i=Object(a.useState)([]),l=Object(s.a)(i,2),d=l[0],u=l[1],j=v(),b=j.loading,m=(j.error,j.setLoading),h=j.setError;var f={publicFood:c,personalFood:d,loadPublicFood:function(e){m(!0),x()({method:"get",url:"".concat(O,"/foods/public"),headers:{Authorization:"Bearer ".concat(e.token)}}).then((function(e){o(e.data),console.log(e.data)})).catch((function(e){e.response?h(e.response.data.message):h("Unknown error occurred")})).then((function(){return m(!1)}))},loadPersonalFood:function(e){m(!0),x()({method:"get",url:"".concat(O,"/foods/personal"),headers:{Authorization:"Bearer ".concat(e.token)}}).then((function(e){u(e.data),console.log(e.data)})).catch((function(e){e.response?h(e.response.data.message):h("Unknown error occurred")})).then((function(){return m(!1)}))},getFoodById:function(e){for(var t=0;t<c.length;t++)if(c[t].id==e)return c[t];for(var n=0;n<d.length;n++)if(d[n].id==e)return d[n];return null},loading:b,createPersonalFood:function(e,t){m(!0),x()({method:"post",url:"".concat(O,"/foods/personal"),data:e,headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(e){u((function(t){return[].concat(Object(p.a)(t),[e.data])}))})).catch((function(e){e.response?h(e.response.data.message):h("Unknown error occurred")})).then((function(){return m(!1)}))},removePersonalFood:function(e,t){m(!0),x()({method:"delete",url:"".concat(O,"/foods/personal/").concat(e),headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(t){return u((function(t){return t.filter((function(t){return t.id!=e}))}))})).catch((function(e){e.response?h(e.response.data.message):h("Unknown error occurred")})).then((function(){return m(!1)}))},editPersonalFood:function(e,t){console.log(e),m(!0),x()({method:"put",url:"".concat(O,"/foods/personal"),data:e,headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(t){u((function(t){return[].concat(Object(p.a)(t.filter((function(t){return t.id!=e.id}))),[e])}))})).catch((function(e){e.response?h(e.response.data.message):h("Unknown error occurred")})).then((function(){return m(!1)}))}};return Object(y.jsx)(k.Provider,{value:f,children:t})},N={username:"",name:"",id:"",permissions:[],token:""},F=r.a.createContext({isAuthenticated:null,currentUser:N,loading:!1,error:"",register:function(){},login:function(){},logout:function(){}});function T(){return Object(a.useContext)(F)}var w=function(e){var t=e.children,n=(Object(i.g)(),Object(a.useState)(N)),r=Object(s.a)(n,2),c=r[0],o=r[1],l=Object(a.useState)(null),d=Object(s.a)(l,2),u=d[0],j=d[1],b=Object(a.useState)(""),m=Object(s.a)(b,2),h=m[0],f=m[1],p=Object(a.useState)(!1),v=Object(s.a)(p,2),k=v[0],C=v[1],T=S(),w=T.loadPublicFood,P=T.loadPersonalFood;function I(){var e=localStorage.getItem("token");e&&function(e){return!((new Date).getTime()/1e3>parseInt(Object(g.a)(e).exp))}(e)?function(e){C(!0),x()({method:"get",url:"".concat(O,"/profile"),headers:{Authorization:"Bearer ".concat(e)}}).then((function(t){var n=t.data,a=n.firstName,r=n.lastName,c=n.id,i=n.permissions,s=n.username;o({id:c,name:a+" "+r,username:s,permissions:i,token:e}),j(!0)})).catch((function(e){e.response?f(e.response.data.message):f("Unknown error occurred"),localStorage.clear(),j(!1)})).then((function(){C(!1)}))}(e):j(!1)}Object(a.useEffect)((function(){I()}),[]),Object(a.useEffect)((function(){u&&(P(c),w(c))}),[u]);var A={isAuthenticated:u,currentUser:c,loading:k,error:h,register:function(e){C(!0),x()({method:"post",url:"".concat(O,"/register"),data:e}).then((function(t){C(!1),e.toggleAction()})).catch((function(e){e.response?f(e.response.data.message):f("Unknown error occurred"),C(!1)}))},login:function(e){var t=e.loginInfo,n=e.save;C(!0),x()({method:"post",url:"".concat(O,"/authenticate"),data:t}).then((function(e){var t=e.data,a=t.id,r=t.name,c=t.permissions,i=t.token,s=t.username;n&&localStorage.setItem("username",s),localStorage.setItem("token",i),o({id:a,name:r,permissions:c,token:i,username:s}),j(!0)})).catch((function(e){e.response?f(e.response.data.message):f("Unknown error occurred!"),j(!1)})).then((function(){C(!1)}))},logout:function(){C(!0),x()({method:"delete",url:"".concat(O,"/session/destroy"),headers:{Authorization:"Bearer ".concat(c.token)}}).catch((function(e){e.response?f(e.response.data.message):f("Unknown error occurred")})).then((function(){localStorage.removeItem("token"),j(!1),C(!1)}))}};return Object(y.jsx)(F.Provider,{value:A,children:t})},P=n(24),I=n(103),A=n(392),E=n(96),B=function(e){var t=e.loading,n=Object(I.a)(e,["loading"]);return Object(y.jsx)(A.a,Object(P.a)(Object(P.a)({},n),{},{children:t?Object(y.jsx)(E.PulseLoader,{size:"8px",color:"white"}):n.children}))},U=n(29),q=n(417),R=n(395),M=n(391),V=n(415),W=n(184),D=n(98),L=n.n(D),z=function(){return Object(y.jsx)(j.a,{variant:"body2",color:"textSecondary",align:"center",children:"Calorie Counter"})},G=Object(d.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/featured/?food,green)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:"#81c784"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2),backgroundColor:"#487e4c"},text:{primary:"#487e4c"},grd:{backgroundColor:"#e6ffe6",margin:"0px"},copyright:{}}})),H=U.b().shape({username:U.d().required(),password:U.d().required()}),K=function(e){var t=e.toggleAction,n=G(),r=T(),c=r.login,o=r.loading,d=r.isAuthenticated,O=(r.error,Object(a.useRef)()),f=Object(a.useState)(!1),x=Object(s.a)(f,2),g=x[0],p=x[1];return Object(a.useEffect)((function(){var e=localStorage.getItem("username");e&&O.current&&O.current.setFieldValue("username",e)}),[]),d?Object(y.jsx)(i.a,{to:"/dashboard"}):Object(y.jsx)(l.c,{innerRef:O,initialValues:{username:"",password:""},validationSchema:H,onSubmit:function(e,t){var n=t.setSubmitting;c({loginInfo:e,save:g}),n(!1)},children:function(e){var a=e.isSubmitting;return Object(y.jsxs)(u.a,{container:!0,component:"main",className:n.root,children:[Object(y.jsx)(R.a,{}),Object(y.jsx)(u.a,{item:!0,xs:!1,sm:4,md:7,className:n.image}),Object(y.jsx)(u.a,{item:!0,xs:12,sm:8,md:5,component:W.a,elevation:6,square:!0,className:n.grd,children:Object(y.jsxs)("div",{className:n.paper,children:[Object(y.jsx)(q.a,{className:n.avatar,children:Object(y.jsx)(L.a,{})}),Object(y.jsx)(j.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(y.jsxs)(l.b,{className:n.form,noValidate:!0,children:[Object(y.jsx)(l.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",component:h.a}),Object(y.jsx)(l.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",component:h.a}),Object(y.jsx)(M.a,{control:Object(y.jsx)(V.a,{color:"primary",checked:g,onChange:function(e){return p(e.target.checked)}}),label:"Remember me"}),Object(y.jsx)(B,{loading:o,type:"submit",fullWidth:!0,variant:"contained",color:"inherit",className:n.submit,disabled:a,children:"Sign In"}),Object(y.jsxs)(u.a,{container:!0,className:n.text,children:[Object(y.jsx)(u.a,{item:!0,xs:!0,children:Object(y.jsx)(b.a,{href:"#",variant:"body2",color:"textPrimary",children:"Forgot password?"})}),Object(y.jsx)(u.a,{item:!0,children:Object(y.jsx)(b.a,{onClick:t,variant:"body2",color:"textPrimary",children:"Don't have an account? Sign Up"})})]}),Object(y.jsx)(m.a,{mt:5,className:n.copyright,children:Object(y.jsx)(z,{})})]})]})})]})}})},_=n(397),J=Object(d.a)((function(e){return{root:{backgroundColor:"#e6ffe6",height:"100vh"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:"#81c784"},form:{width:"100%",marginTop:e.spacing(3)},text:{primary:"#487e4c"},submit:{margin:e.spacing(3,0,2),backgroundColor:"#487e4c"},copyright:{}}})),Y=U.b().shape({firstName:U.d().min(2,"Too short!").max(50,"Too long!").required(),lastName:U.d().min(2,"Too short!").max(50,"Too long!").required(),username:U.d().min(5,"Too short!").max(50,"Too long!").required(),email:U.d().email("Invalid email").required(),password:U.d().min(12,"Too short!").max(100,"Too long!").required(),confirmPassword:U.d().oneOf([U.c("password"),null],"Passwords must match").required()}),Q=function(e){var t=e.toggleAction,n=T(),a=n.register,r=n.loading,c=(n.error,J());return Object(y.jsx)(l.c,{initialValues:{firstName:"",lastName:"",username:"",email:"",password:"",confirmPassword:""},validationSchema:Y,onSubmit:function(e,n){var r=n.setSubmitting;a({firstName:e.firstName,lastName:e.lastName,username:e.username,email:e.email,password:e.password,toggleAction:t}),r(!1)},children:function(e){e.submitForm,e.isSubmitting;return Object(y.jsx)(u.a,{container:!0,component:"main",className:c.root,children:Object(y.jsxs)(_.a,{component:"main",maxWidth:"xs",children:[Object(y.jsx)(R.a,{}),Object(y.jsxs)("div",{className:c.paper,children:[Object(y.jsx)(q.a,{className:c.avatar,children:Object(y.jsx)(L.a,{})}),Object(y.jsx)(j.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(y.jsxs)("form",{className:c.form,noValidate:!0,children:[Object(y.jsxs)(u.a,{container:!0,spacing:2,children:[Object(y.jsx)(u.a,{item:!0,xs:12,sm:6,children:Object(y.jsx)(l.a,{autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",component:h.a})}),Object(y.jsx)(u.a,{item:!0,xs:12,sm:6,children:Object(y.jsx)(l.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname",component:h.a})}),Object(y.jsx)(u.a,{item:!0,xs:12,children:Object(y.jsx)(l.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",component:h.a})}),Object(y.jsx)(u.a,{item:!0,xs:12,children:Object(y.jsx)(l.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",component:h.a})}),Object(y.jsx)(u.a,{item:!0,xs:12,children:Object(y.jsx)(l.a,{variant:"outlined",required:!0,fullWidth:!0,name:"confirmPassword",label:"Repeat Password",type:"password",id:"password",component:h.a})})]}),Object(y.jsx)(B,{loading:r,type:"submit",fullWidth:!0,variant:"contained",color:"inherit",className:c.submit,children:"Sign Up"}),Object(y.jsx)(u.a,{container:!0,justify:"flex-end",className:c.text,children:Object(y.jsx)(u.a,{item:!0,children:Object(y.jsx)(b.a,{onClick:t,variant:"body2",color:"textPrimary",children:"Already have an account? Sign in"})})})]})]}),Object(y.jsx)(m.a,{mt:5,className:c.copyright,children:Object(y.jsx)(z,{})})]})})}})},X=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],r=t[1];function c(){r((function(e){return!e}))}return Object(y.jsx)("div",{children:n?Object(y.jsx)(Q,{toggleAction:c}):Object(y.jsx)(K,{toggleAction:c})})},Z=n(398),$=n(399),ee=n(400),te=n(401),ne=[1,2,3,4,5,6,7,8,9],ae=function(){var e=dt();return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("main",{children:[Object(y.jsx)("div",{className:e.container,children:Object(y.jsxs)(_.a,{maxWidth:"sm",children:[Object(y.jsx)(j.a,{variant:"h2",align:"center",color:"textPrimary",gutterBottom:!0,children:"Our Recipes"}),Object(y.jsx)(j.a,{variant:"h5",align:"center",color:"textSecondary",paragraph:!0,children:"Pull up a chair. Take a Taste. Come join us. Life is so endlessly delicious."})]})}),Object(y.jsx)(_.a,{className:e.cardGrid,maxWidth:"md",children:Object(y.jsx)(u.a,{container:!0,spacing:4,children:ne.map((function(t){return Object(y.jsx)(u.a,{item:!0,sm:6,md:4,children:Object(y.jsxs)(Z.a,{className:e.card,children:[Object(y.jsx)($.a,{className:e.cardMedia,image:"https://source.unsplash.com/featured/?food,eating",title:"Image Title"}),Object(y.jsxs)(ee.a,{className:e.cardContent,children:[Object(y.jsx)(j.a,{gutterBottom:!0,variant:"h5",children:"Recipe"}),Object(y.jsx)(j.a,{children:" Ingredients...."})]}),Object(y.jsxs)(te.a,{children:[Object(y.jsx)(A.a,{className:e.buttonPrvi,size:"small",color:"primary",children:"View"}),Object(y.jsx)(A.a,{className:e.buttonDrugi,size:"small",color:"secondary",children:"Edit"})]})]})},t)}))})})]}),Object(y.jsx)("footer",{className:e.footer,children:Object(y.jsx)(j.a,{variant:"subtitle1",align:"center",color:"textSecondary",children:"Copyright 2021"})})]})},re=n(385),ce=n(418),oe=function(e){var t=e.carbs,n=e.fat,a=e.protein;return Object(y.jsxs)("div",{children:[Object(y.jsx)(ce.a,{variant:"outlined",color:"primary",label:"Carbs: ".concat(t,"g")}),Object(y.jsx)(ce.a,{variant:"outlined",color:"primary",label:"Fat: ".concat(n,"g")}),Object(y.jsx)(ce.a,{variant:"outlined",color:"primary",label:"Protein: ".concat(a,"g")})]})},ie=n(419),se=Object(d.a)({root:{width:250},input:{width:42}}),le=function(e){var t=e.value,n=e.setValue,a=e.label,r=se();return Object(y.jsxs)("div",{className:r.root,children:[Object(y.jsx)(j.a,{id:"input-slider",gutterBottom:!0,children:a}),Object(y.jsxs)(u.a,{container:!0,spacing:2,alignItems:"center",children:[Object(y.jsx)(u.a,{item:!0,xs:!0,children:Object(y.jsx)(ie.a,{value:"number"===typeof t?t:0,onChange:function(e,t){n(t)},"aria-labelledby":"input-slider"})}),Object(y.jsxs)(u.a,{item:!0,children:[Object(y.jsx)(re.a,{className:r.input,value:t,margin:"dense",onChange:function(e){n(""===e.target.value?"":Number(e.target.value))},onBlur:function(){(t<0||""===t)&&n(0)},inputProps:{step:1,min:0,max:100,type:"number","aria-labelledby":"input-slider"}}),"%"]})]})]})},de=function(){var e=Object(a.useState)(50),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(15),o=Object(s.a)(c,2),i=o[0],l=o[1],d=Object(a.useState)(35),u=Object(s.a)(d,2),b=u[0],m=u[1],h=Object(a.useState)(2e3),O=Object(s.a)(h,2),f=O[0],x=O[1],g=Object(a.useState)(!1),p=Object(s.a)(g,2),v=p[0],k=p[1],S=Object(a.useState)({carbs:0,fat:0,protein:0}),C=Object(s.a)(S,2),N=C[0],F=C[1];return Object(a.useEffect)((function(){!function(){if("number"===typeof f){var e=0;"number"===typeof n&&(e+=n,F((function(e){return Object(P.a)(Object(P.a)({},e),{},{carbs:Math.round(f/400*n)})}))),"number"===typeof i&&(e+=i,F((function(e){return Object(P.a)(Object(P.a)({},e),{},{fat:Math.round(f/900*i)})}))),"number"===typeof b&&(e+=b,F((function(e){return Object(P.a)(Object(P.a)({},e),{},{protein:Math.round(f/400*b)})}))),k(e>100)}}()}),[n,i,b,f]),Object(y.jsxs)("div",{children:[Object(y.jsx)(j.a,{id:"total-calories",gutterBottom:!0,children:"Total calories"}),Object(y.jsx)(re.a,{"aria-labelledby":"total-calories",value:f,onChange:function(e){x(""===e.target.value?"":Number(e.target.value))},onBlur:function(){(f<0||""===f)&&x(0)}}),Object(y.jsx)(le,{label:"Carbohydrates",value:n,setValue:r}),Object(y.jsx)(le,{label:"Protein",value:b,setValue:m}),Object(y.jsx)(le,{label:"Fat",value:i,setValue:l}),Object(y.jsx)(oe,Object(P.a)({},N)),v&&Object(y.jsx)("div",{children:"The percentage total is more than 100%"})]})},ue=Object(d.a)((function(e){return{main:{margin:e.spacing(2,8,0)},inner:{margin:e.spacing(4,0,0)}}})),je=function(){var e=ue(),t=T().currentUser;return Object(y.jsxs)("div",{className:e.main,children:[Object(y.jsx)("h1",{children:"Profile page"}),Object(y.jsx)("div",{children:t.name}),Object(y.jsx)("div",{children:t.username}),Object(y.jsx)("div",{className:e.inner,children:Object(y.jsx)(de,{})})]})},be=function(e){var t=e.children,n=Object(I.a)(e,["children"]),a=T().isAuthenticated;return Object(y.jsx)(i.b,Object(P.a)(Object(P.a)({},n),{},{render:function(){return a?t:Object(y.jsx)(i.a,{to:{pathname:"/"}})}}))},me=n(402),he=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],r=t[1];return{darkMode:n,toggleDarkMode:function(){r((function(e){return!e}))}}},Oe=n(181),fe=Object(Oe.a)({palette:{type:"light",background:{default:"#e6ffe6",paper:"#f0f0f0"},primary:{main:"#487e4c"},secondary:{main:"#666666"}}}),xe=Object(Oe.a)({palette:{type:"dark",background:{default:"#a1b2a1",paper:"#415145"},primary:{main:"#8fdc9e"},secondary:{main:"#f0f0f0"}}}),ge=r.a.createContext((function(){}));var pe=function(e){var t=e.children,n=he(),a=n.darkMode,r=n.toggleDarkMode;return Object(y.jsx)(me.a,{theme:a?xe:fe,children:Object(y.jsx)(ge.Provider,{value:r,children:t})})},ve=n(57),ye=n(403),ke=n(404),Se=n(355),Ce=n(390),Ne=n(178),Fe=n.n(Ne),Te=n(179),we=n.n(Te),Pe=Object(d.a)((function(e){return{menuButton:{marginRight:e.spacing(2),edge:"start",color:"inherit"},title:{marginRight:20},filler:{flexGrow:1},icon:{width:40,height:40},switchToggle:{color:"default"}}})),Ie=function(e){var t=e.loading,n=e.logout,a=e.toggleTheme,r=e.type,c=e.handleLogoClick,o=e.handleProfileClick,i=e.handleFoodClick,s=e.handleIntakeClick,l=Pe();return Object(y.jsx)(ye.a,{position:"static",children:Object(y.jsxs)(ke.a,{children:[Object(y.jsx)(Se.a,{className:l.menuButton,onClick:c,children:Object(y.jsx)(Fe.a,{})}),Object(y.jsx)(j.a,{className:l.title,variant:"h6",children:"KCAL-COUNTER"}),Object(y.jsx)(A.a,{variant:"text",color:"inherit",onClick:i,children:"Food"}),Object(y.jsx)(A.a,{variant:"text",color:"inherit",onClick:s,children:"Intake"}),Object(y.jsx)("div",{className:l.filler}),Object(y.jsx)(Ce.a,{className:l.switchToggle,checked:"light"===r,onChange:a}),Object(y.jsx)(Se.a,{className:l.menuButton,onClick:o,children:Object(y.jsx)(we.a,{className:l.icon})}),Object(y.jsx)(B,{loading:t,variant:"outlined",color:"inherit",onClick:n,children:"Logout"})]})})},Ae=function(){var e=Object(i.g)(),t=T(),n=t.logout,r=t.loading,c=Object(a.useContext)(ge),o=Object(ve.a)().palette.type;return Object(y.jsx)(Ie,{loading:r,logout:n,handleLogoClick:function(){e.push("/")},handleProfileClick:function(){e.push("/profile")},handleFoodClick:function(){e.push("/food")},handleIntakeClick:function(){e.push("/intake")},toggleTheme:c,type:o})},Ee=n(411),Be=n(410),Ue=["NOT_SPECIFIED","VEGETABLES","FRUITS","NUTS","MEATS","SWEETS","PASTRY","FISH","CARBS"],qe=n(420),Re=n(356),Me=n(407),Ve=n(408),We=n(405),De=n(406),Le=n(52),ze=n(180),Ge=function(e){switch(e.foodType){case"MEATS":return Object(y.jsx)(Le.d,{});case"FRUITS":return Object(y.jsx)(Le.f,{});case"VEGETABLES":return Object(y.jsx)(Le.b,{});case"FISH":return Object(y.jsx)(Le.c,{});case"NUTS":return Object(y.jsx)(Le.e,{});case"PASTRY":return Object(y.jsx)(Le.a,{});case"SWEETS":return Object(y.jsx)(Le.h,{});case"CARBS":return Object(y.jsx)(Le.g,{});default:return Object(y.jsx)(ze.a,{})}},He=function(e){var t=e.foodType;return Object(y.jsx)(We.a,{children:Object(y.jsx)(De.a,{fontSize:"large",color:"primary",children:Object(y.jsx)(Ge,{foodType:t})})})},Ke=Object(d.a)((function(e){return Object(qe.a)({listItem:{backgroundColor:e.palette.background.paper},kcal:{margin:e.spacing(4,0,2)}})})),_e=function(e){var t=e.food,n=Ke();return Object(y.jsxs)(Re.a,{className:n.listItem,children:[Object(y.jsx)(He,{foodType:t.foodType}),Object(y.jsx)(Me.a,{primary:t.name,secondary:t.foodType}),Object(y.jsx)(Ve.a,{children:Object(y.jsx)(j.a,{variant:"h6",children:"".concat(t.kcal," kcal")})})]})},Je=n(389),Ye=n(409),Qe=function(e){var t=e.foodArray;return Object(y.jsx)(Je.a,{children:t.map((function(e,n){return Object(y.jsxs)("div",{children:[Object(y.jsx)(_e,{food:e}),n!==t.length-1?Object(y.jsx)(Ye.a,{variant:"inset"}):Object(y.jsx)(y.Fragment,{})]},e.id)}))})},Xe=Object(d.a)((function(e){return{listItemWrapper:{display:"flex",width:"100%"},listItem:{flex:1}}})),Ze=function(e){var t=e.foodArray,n=e.checked,a=e.setChecked,r=e.single,c=Xe();return Object(y.jsx)(Je.a,{children:t.map((function(e,o){return Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:c.listItemWrapper,children:[Object(y.jsx)(V.a,{checked:n.includes(e.id),onChange:function(t,n){return function(e,t,n){a(r?t?[n]:[]:t?function(e){return[].concat(Object(p.a)(e),[n])}:function(e){return e.filter((function(e){return e!==n}))})}(0,n,e.id)}}),Object(y.jsx)("div",{className:c.listItem,children:Object(y.jsx)(_e,{food:e})})]}),o!==t.length-1?Object(y.jsx)(Ye.a,{variant:"inset"}):Object(y.jsx)(y.Fragment,{})]},e.id)}))})},$e=function(e){var t=e.food,n=e.handleEditToggle,a=T().currentUser,r=S(),c=r.loading,o=r.editPersonalFood;return Object(y.jsx)("div",{children:Object(y.jsx)(l.c,{initialValues:{name:t.name,kcal:t.kcal,foodType:void 0!==t.foodType?t.foodType:"NOT_SPECIFIED"},validationSchema:et,onSubmit:function(e,r){r.setSubmitting,r.resetForm;o(Object(P.a)(Object(P.a)({},t),{},{name:e.name,kcal:e.kcal,foodType:e.foodType}),a),n()},children:function(e){var t=e.submitForm,n=e.isSubmitting,a=(e.errors,e.values),r=e.setFieldValue;return Object(y.jsxs)(l.b,{children:[Object(y.jsx)(m.a,{margin:1,children:Object(y.jsx)(l.a,{name:"name",type:"text",label:"Name",component:h.a})}),Object(y.jsx)(m.a,{margin:1,children:Object(y.jsx)(l.a,{name:"kcal",type:"number",label:"Kcal",component:h.a})}),Object(y.jsx)(m.a,{margin:1,children:Object(y.jsx)(Ee.a,{value:a.foodType,onChange:function(e){return r("foodType",e.target.value)},children:Ue.map((function(e){return Object(y.jsx)(Be.a,{value:e,children:e},e)}))})}),Object(y.jsx)(m.a,{margin:1,children:Object(y.jsx)(B,{loading:c,variant:"contained",color:"primary",disabled:n,onClick:t,children:"Save"})})]})}})})},et=U.b().shape({name:U.d().required(),kcal:U.a().positive().required(),foodType:U.d().optional()}),tt=Object(d.a)((function(e){return{main:{margin:e.spacing(2,8,0)}}})),nt=function(){var e=tt(),t=S(),n=t.publicFood,r=t.personalFood,c=t.createPersonalFood,o=t.loading,i=t.removePersonalFood,d=t.getFoodById,u=Object(a.useState)(!1),j=Object(s.a)(u,2),b=j[0],O=j[1],f=Object(a.useState)(!1),x=Object(s.a)(f,2),g=x[0],p=x[1],v=Object(a.useState)(!1),k=Object(s.a)(v,2),C=k[0],N=k[1],F=T().currentUser,w=Object(a.useState)([]),P=Object(s.a)(w,2),I=P[0],E=P[1],U=Object(a.useState)(null),q=Object(s.a)(U,2),R=q[0],M=q[1];function V(){null!==R&&N((function(e){return!e}))}return Object(a.useEffect)((function(){1===I.length&&M(d(I[0]))}),[I]),Object(y.jsxs)("div",{className:e.main,children:[!g&&Object(y.jsxs)("div",{children:[Object(y.jsx)(Qe,{foodArray:n.concat(r)}),Object(y.jsx)(A.a,{variant:"contained",color:"primary",onClick:function(){return p(!0)},children:"Edit personal food"})]}),g&&Object(y.jsxs)("div",{children:[!b&&!C&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(Ze,{checked:I,setChecked:E,foodArray:r,single:!0}),Object(y.jsx)(A.a,{variant:"contained",color:"primary",onClick:function(){return O(!0)},children:"Create new food"}),Object(y.jsx)(A.a,{variant:"contained",color:"primary",onClick:V,children:"Edit selected"}),Object(y.jsx)(A.a,{variant:"contained",color:"primary",onClick:function(){1===I.length&&i(I[0],F)},children:"Remove selected"}),Object(y.jsx)(A.a,{variant:"contained",color:"primary",onClick:function(){return p(!1)},children:"Back to food"})]}),!b&&1===I.length&&C&&null!==R&&Object(y.jsx)($e,{food:R,handleEditToggle:V}),b&&Object(y.jsx)("div",{children:Object(y.jsx)(l.c,{initialValues:{name:"",kcal:0,foodType:"NOT_SPECIFIED"},validationSchema:et,onSubmit:function(e,t){var n=t.setSubmitting,a=t.resetForm;c(e,F),a(),n(!1)},children:function(e){var t=e.submitForm,n=e.isSubmitting,a=(e.errors,e.values),r=e.setFieldValue;return Object(y.jsxs)(l.b,{children:[Object(y.jsx)(m.a,{margin:1,children:Object(y.jsx)(l.a,{name:"name",type:"text",label:"Name",component:h.a})}),Object(y.jsx)(m.a,{margin:1,children:Object(y.jsx)(l.a,{name:"kcal",type:"number",label:"Kcal",component:h.a})}),Object(y.jsx)(m.a,{margin:1,children:Object(y.jsx)(Ee.a,{value:a.foodType,onChange:function(e){return r("foodType",e.target.value)},children:Ue.map((function(e){return Object(y.jsx)(Be.a,{value:e,children:e},e)}))})}),Object(y.jsx)(m.a,{margin:1,children:Object(y.jsx)(B,{loading:o,variant:"contained",color:"primary",disabled:n,onClick:t,children:"Create food"})}),Object(y.jsx)(m.a,{margin:1,children:Object(y.jsx)(A.a,{variant:"contained",color:"primary",onClick:function(){return O(!1)},children:"Back to food"})})]})}})})]})]})},at=function(){return Object(y.jsx)("div",{style:{minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(y.jsx)(E.RotateLoader,{loading:!0})})},rt=function(){var e=Object(i.g)();return Object(y.jsxs)("div",{children:[Object(y.jsx)("h1",{children:"Error 404"}),Object(y.jsx)("h6",{children:"Page does not exist!"}),Object(y.jsx)(A.a,{variant:"contained",color:"primary",onClick:function(){return e.push("/")},children:"Go to login"})]})},ct=n(414),ot=n(413),it=function(e){var t=e.foodArray;return Object(y.jsx)(Je.a,{children:t.map((function(e,n){return Object(y.jsxs)("div",{children:[Object(y.jsx)(_e,{food:e}),n!==t.length-1?Object(y.jsx)(Ye.a,{variant:"inset"}):Object(y.jsx)(y.Fragment,{})]},e.id)}))})},st=Object(d.a)((function(e){return{main:{margin:e.spacing(2,8,0)},inner:{margin:e.spacing(2,0,2)},addFood:{margin:e.spacing(0,2,0)}}})),lt=function(){var e=st();function t(e){return Object(ct.a)(Object(ot.a)(e,"yyyy-MM-dd",new Date),"d/M/yyyy")}var n=Object(a.useState)([]),r=Object(s.a)(n,2),c=r[0],o=r[1],i=Object(a.useState)(0),l=Object(s.a)(i,2),d=l[0],u=l[1],b=Object(a.useState)({carbs:0,proteins:0,fats:0}),m=Object(s.a)(b,2),h=m[0],f=m[1],g=Object(a.useState)(Object(ct.a)(Date.now(),"yyyy-MM-dd")),k=Object(s.a)(g,2),C=k[0],N=k[1],F=v(),w=(F.loading,F.error,F.setLoading),I=F.setError,E=Object(a.useState)(!1),B=Object(s.a)(E,2),U=B[0],q=B[1],R=T().currentUser,M=S(),V=M.publicFood,W=M.personalFood,D=M.getFoodById,L=Object(a.useState)([]),z=Object(s.a)(L,2),G=z[0],H=z[1];return Object(a.useEffect)((function(){o([]),w(!0),x()({method:"get",url:"".concat(O,"/intake/").concat(t(C)),headers:{Authorization:"Bearer ".concat(R.token)}}).then((function(e){for(var t=function(t){var n=D(e.data[t].foodId);null!==n&&o((function(a){return[].concat(Object(p.a)(a),[Object(P.a)(Object(P.a)({},n),{},{id:e.data[t].id,foodId:e.data[t].foodId})])}))},n=0;n<e.data.length;++n)t(n)})).catch((function(e){e.response?I(e.response.data.message):I("Unknown error occurred")})).then((function(){return w(!1)}))}),[C]),Object(a.useEffect)((function(){!function(){var e=0;c.forEach((function(t){e+=t.kcal})),u(e)}(),function(){var e={carbs:0,proteins:0,fats:0};c.forEach((function(t){e.carbs+=t.carbs,e.proteins+=t.proteins,e.fats+=t.fats})),f(e)}()}),[c]),Object(y.jsxs)("div",{className:e.main,children:[!U&&Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{children:[Object(y.jsxs)(j.a,{variant:"h5",children:["Total calories: ",d]}),Object(y.jsx)(j.a,{variant:"h5",children:"Carbs: ".concat(h.carbs," Protein: ").concat(h.proteins," Fat: ").concat(h.fats)}),Object(y.jsxs)("div",{className:e.inner,children:[Object(y.jsx)(re.a,{type:"date",value:C,onChange:function(e){N(e.target.value)}}),Object(y.jsx)(A.a,{variant:"contained",color:"primary",onClick:function(){return q(!0)},className:e.addFood,children:"Add food"})]}),0===c.length&&Object(y.jsx)(j.a,{variant:"h5",children:"No intake for this day has been found!"})]}),Object(y.jsx)(it,{foodArray:c})]}),U&&Object(y.jsxs)("div",{children:[Object(y.jsx)(Ze,{foodArray:V.concat(W),checked:G,setChecked:H}),Object(y.jsx)(A.a,{variant:"contained",color:"primary",onClick:function(){for(var e=function(e){var n=D(G[e]);null!==n&&x()({method:"post",url:"".concat(O,"/intake/").concat(t(C),"/").concat(n.id),headers:{Authorization:"Bearer ".concat(R.token)}}).then((function(e){var t=Object(P.a)(Object(P.a)({},n),{},{id:e.data.id,foodId:e.data.foodId});o((function(e){return[].concat(Object(p.a)(e),[t])}))})).catch((function(e){e.response?I(e.response.data.message):I("Unknown error occurred")})).then((function(){return w(!1)}))},n=0;n<G.length;n++)e(n);q(!1)},children:"Add selected"})]})]})},dt=Object(d.a)((function(e){return{container:{padding:e.spacing(8,0,6)},button:{marginTop:"40px"},cardGrid:{padding:"20px 0"},main:{},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},footer:{padding:"50px 0"},buttonPrvi:{},buttonDrugi:{}}}));var ut=function(){return null===T().isAuthenticated?Object(y.jsx)(at,{}):Object(y.jsxs)(i.d,{children:[Object(y.jsx)(i.b,{exact:!0,path:"/",component:X}),Object(y.jsxs)(be,{path:"/dashboard",children:[Object(y.jsx)(Ae,{}),Object(y.jsx)(ae,{})]}),Object(y.jsxs)(be,{path:"/profile",children:[Object(y.jsx)(Ae,{}),Object(y.jsx)(je,{})]}),Object(y.jsxs)(be,{path:"/food",children:[Object(y.jsx)(Ae,{}),Object(y.jsx)(nt,{})]}),Object(y.jsxs)(be,{path:"/intake",children:[Object(y.jsx)(Ae,{}),Object(y.jsx)(lt,{})]}),Object(y.jsx)(i.b,{path:"*",component:rt})]})},jt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,422)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))},bt=n(77);o.a.render(Object(y.jsx)(bt.a,{children:Object(y.jsx)(pe,{children:Object(y.jsx)(C,{children:Object(y.jsxs)(w,{children:[Object(y.jsx)(R.a,{}),Object(y.jsx)(ut,{})]})})})}),document.getElementById("root")),jt()}},[[352,1,2]]]);
//# sourceMappingURL=main.2e9e4efc.chunk.js.map